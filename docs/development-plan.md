# Inkrement（日进）开发计划

> 配合 PRD v1.2 + Tech Spec v1.0 使用  
> 预计总工期：6 周（可根据实际情况调整）

---

## Phase 1：基础设施搭建（Week 1）

> 目标：项目脚手架 + 核心链路打通 + 部署上线

### 1.1 项目初始化

- [ ] 使用 `create-next-app` 初始化 Next.js 15 + TypeScript + Tailwind CSS + pnpm
- [ ] 安装并配置 shadcn/ui 组件库
- [ ] 配置 ESLint + Prettier
- [ ] 配置 `.env` 模板（`.env.example`）

### 1.2 数据库

- [ ] 创建 Prisma Schema（按 Tech Spec 第三章）
- [ ] 执行数据库迁移（`prisma db push`）
- [ ] 编写 Prisma Client 封装（`src/lib/db.ts`）
- [ ] Seed 脚本：初始管理员账号 + 测试数据

### 1.3 AI 抽象层

- [ ] 实现 `AIProvider` 接口
- [ ] 实现 `QwenProvider`（文本 + 结构化输出）
- [ ] 实现 `QwenVLProvider`（视觉识别）
- [ ] Prompt 模板目录结构 + 第一个写作批改 Prompt

### 1.4 基础 UI

- [ ] 全局布局组件（Header + 底部导航栏 + 页面容器）
- [ ] 设计色系 Token（Tailwind 配色方案）
- [ ] 移动端适配基础验证

### 1.5 部署

- [ ] 购买阿里云轻量服务器（香港 2C2G）
- [ ] 服务器环境配置（Node.js 20 + PM2 + Nginx）
- [ ] Let's Encrypt HTTPS 配置
- [ ] GitHub Actions 自动部署流水线

### Phase 1 完成标记

- [ ] 本地 `pnpm dev` 可正常运行
- [ ] 通过公网 IP/域名可访问到首页
- [ ] AI Provider 测试脚本可成功调用 Qwen API

---

## Phase 2：认证 + 中文写作（Week 2-3）

> 目标：最小可用闭环 — 注册 → 登录 → 中文写作 → AI 批改

### 2.1 认证系统

- [ ] 登录页 UI（手机号 + 验证码）
- [ ] 注册页 UI（选择角色 + 年级）
- [ ] 阿里云 SMS 短信发送封装
- [ ] NextAuth.js 自定义 Credentials Provider
- [ ] 路由守卫 Middleware（未登录重定向）
- [ ] 用户信息 API

### 2.2 训练计划

- [ ] 每日任务自动生成逻辑（按周分配模块）
- [ ] 学生主页 Dashboard UI（今日任务卡片）
- [ ] 连续打卡天数计算与展示

### 2.3 中文写作模块

- [ ] AI 出题 API + Prompt（记叙文/描写文/读后感/议论文）
- [ ] 写作页面 UI（题目展示 + 文本输入 + 实时字数统计）
- [ ] 草稿自动保存（localStorage，60s 间隔）
- [ ] 拍照上传组件（调用摄像头 / 相册 + 图片压缩）
- [ ] 图片上传 API（前端 → R2 存储）
- [ ] OCR 识别 API（R2 图片 URL → Qwen-VL → 文本回显）
- [ ] 提交 + AI 批改 API（Qwen-Max 结构化输出）
- [ ] 批改结果展示页（总分动画 + 分项评分 + 详细点评 + 修改建议 + 示范改写）
- [ ] 重新提交功能（修改后再次提交，保存新版本）
- [ ] 历史版本切换查看

### Phase 2 完成标记

- [ ] 可完成完整流程：注册 → 登录 → 看到今日任务 → 做中文写作 → 收到 AI 批改
- [ ] 拍照上传 + OCR 识别 → 确认 → 提交 可正常工作
- [ ] 重新提交后新版本覆盖旧成绩

---

## Phase 3：阅读模块 + 错题系统（Week 3-4）

> 目标：补全四大模块 + 错题闭环

### 3.1 古文阅读模块

- [ ] 古文篇目展示 UI（原文 + 注释）
- [ ] 题目生成逻辑（从篇目库出题：字词解释 + 句子翻译 + 内容理解）
- [ ] 答题页面 UI（逐题作答）
- [ ] AI 逐题批改 + 解析展示
- [ ] 重点字词列表展示

### 3.2 英文写作模块

- [ ] AI 出题（看图写话/话题作文/书信）+ Prompt
- [ ] 复用中文写作页面框架（文字输入 + 拍照 + 实时词数统计）
- [ ] AI 批改 Prompt（语法错误标注 + 表达优化 + 参考范文）
- [ ] 批改结果展示（含语法高亮标注）

### 3.3 英文阅读模块

- [ ] AI 生成阅读文章 + Prompt（150-250词，校园/科学/文化/人物）
- [ ] 阅读理解题（5道选择/填空）
- [ ] AI 逐题批改 + 原文依据
- [ ] 生词表展示

### 3.4 错题系统

- [ ] 错题记录逻辑（按模块入库条件判断）
- [ ] 错题本页面 UI（按模块筛选 + 错误次数 + 状态标签）
- [ ] 错题复推逻辑（每日最多 2 道，附加在当日任务末尾）
- [ ] 出库条件判断（连续答对 2 次自动 archived）
- [ ] 错题专项练习入口

### Phase 3 完成标记

- [ ] 四大模块均可完整运行（出题→作答→AI批改→查看结果）
- [ ] 做错的题目自动出现在错题本中
- [ ] 下次同类训练日，错题作为附加项出现

---

## Phase 4：打卡记录 + 家长端（Week 5）

> 目标：成长可视化 + 家长监督

### 4.1 打卡与记录

- [ ] 打卡日历页面（月视图，已完成/未完成状态）
- [ ] 历史记录列表页（按时间倒序，含模块标签 + 分数）
- [ ] 历史记录详情页（题目 + 提交内容 + AI 批改 + 版本切换）
- [ ] 成绩统计页（各模块平均分/最高分 + 近 5 次趋势折线图）
- [ ] 连续打卡天数激励展示

### 4.2 家长端

- [ ] 家长主页 UI
- [ ] 邀请码关联流程（学生展示邀请码 + 家长输入关联）
- [ ] 家长查看孩子打卡日历（只读）
- [ ] 家长查看训练详情（题目 + 提交 + AI 批改）
- [ ] 家长查看成绩趋势
- [ ] 家长查看错题本（只读）

### Phase 4 完成标记

- [ ] 学生可在日历上看到每天的完成状态
- [ ] 家长可通过邀请码关联并查看所有数据
- [ ] 折线图正确展示近期成绩趋势

---

## Phase 5：后台管理 + 打磨（Week 6）

> 目标：管理工具 + 整体打磨上线

### 5.1 后台管理 UI

- [ ] Admin 布局（侧边栏导航）
- [ ] 古文篇目管理（新增/编辑/删除/搜索/筛选）
- [ ] AI 模型配置页（下拉选择各模块模型 + API Key 配置）
- [ ] 用户管理页（用户列表 + 可重置密码）
- [ ] 训练数据统计页（完成次数、平均分等）
- [ ] Admin 权限校验 Middleware

### 5.2 古文篇目首批录入

- [ ] 整理并录入第一批约 20 篇预初教材核心篇目
- [ ] 通过后台管理 UI 验证 CRUD 功能

### 5.3 整体打磨

- [ ] 移动端适配全面检查（所有页面）
- [ ] 加载状态 / 空状态 / 错误状态 UI
- [ ] 提交成功动效（confetti + 分数计数动画）
- [ ] 页面过渡动画
- [ ] SEO 基础（title / meta / 语义化 HTML）
- [ ] 安全检查（XSS / CSRF / API 限流）
- [ ] SQLite 数据库备份脚本

### Phase 5 完成标记

- [ ] 后台管理可正常管理古文篇目和 AI 配置
- [ ] 全部页面移动端体验良好
- [ ] 可交付给孩子日常使用

---

*— 文档结束 · Development Plan v1.0 —*
